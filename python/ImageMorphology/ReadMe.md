## 图像形态学变换

### 腐蚀与膨胀

图像的膨胀（dilation）和腐蚀（Erosion）是两种基本的形态学运算，主要用来寻找图像中的极大区域和极小区域。其中膨胀类似于“领域扩张”，将图像中的高亮区域或白色区域进行扩张，其运行结果图比原图的高亮区域更大；腐蚀类似“领域被蚕食”，将图像中高亮区域或白色部分进行缩减细化，其运行结果图比原图的高亮区域更小。

#### 腐蚀
腐蚀会把物体的边界腐蚀掉，卷积核沿着图像滑动，如果卷积核对应的原图的所有像素值为1，那么中心元素就保持原来的值，否则变为零。主要应用在去除白噪声，也可以断开连在一起的物体。

![image](https://user-images.githubusercontent.com/27406337/163762832-7048756f-ba64-4397-a7bd-4a9b8962d046.png)

腐蚀的作用：
1. 对象大小减少
2. 平滑对象边缘
3. 弱化或者分割图像之间的半岛型连接


#### 膨胀

卷积核所对应的原图像的像素值只要有一个是1，中心像素值就是1.一般在除噪声，先腐蚀再膨胀，因为腐蚀在去除白噪声的时候也会使图像缩小，所以我们之后要进行膨胀。当然也可以用来将两者物体分开。

![image](https://user-images.githubusercontent.com/27406337/163762930-9785843c-f43b-4b98-a6d9-7a4ae182d805.png)


膨胀的作用：
1. 对象大小增加
2. 平滑对象边缘
3. 减少或者填充对象之间的距离

```python
腐蚀
cv2.erode(src,                     # 输入图像
      kernel,                  # 卷积核
      dst=None,
      anchor=None,
      iterations=None,         # 迭代次数，默认1
      borderType=None,
      borderValue=None)
 
膨胀
cv2.dilate(src,                    # 输入图像
           kernel,                 # 卷积核
           dst=None,
           anchor=None,
           iterations=None,        # 迭代次数，默认1
           borderType=None,
           borderValue=None)
```

### 开运算与闭运算

开运算和闭运算就是将腐蚀和膨胀按照一定的次序进行处理。但是这两者并不是可逆的，即先开后闭并不能得到原来的图像。

为了获取图像中的主要对象：对一幅二值图连续使用闭运算和开运算，或者消除图像中的噪声，也可以对图像先用开运算后用闭运算，不过这样也会消除一些破碎的对象。

开运算：先腐蚀后膨胀，用于移除由图像噪声形成的斑点
闭运算：先膨胀后腐蚀，用来连接被误分为许多小块的对象

#### 开运算

![image](https://user-images.githubusercontent.com/27406337/163763120-2a5dd990-c415-4208-98d6-faef6a300ddd.png)

开运算总结：
（1）开运算能够除去孤立的小点，毛刺和小桥，而总的位置和形状不变。
（2）开运算是一个基于几何运算的滤波器
（3）结构元素大小的不同将导致滤波效果的不同
（4）不同的结构元素的选择导致了不同的分割，即提取出不同的特征。


#### 闭运算

![image](https://user-images.githubusercontent.com/27406337/163763164-f2cc606b-bbc6-4d20-a82f-3f36df21418e.png)

闭运算总结：

（1）闭运算能够填平小湖（即小孔），弥合小裂缝，而总的位置和形状不变。
（2）闭运算是通过填充图像的凹角来滤波图像的。
（3）结构元素大小的不同将导致滤波效果的不同。
（4）不同结构元素的选择导致了不同的分割。

```python
开运算:图像开运算主要使用的函数morphologyEx，它是形态学扩展的一组函数，
其参数cv2.MORPH_OPEN对应开运算。其原型如下：dst = cv2.morphologyEx(src, cv2.MORPH_OPEN, kernel)
参数dst表示处理的结果，src表示原图像，cv2.MORPH_OPEN表示开运算，kernel表示卷积核
 
 
 闭运算:图像闭运算主要使用的函数morphologyEx，其原型如下：dst = cv2.morphologyEx(src, cv2.MORPH_CLOSE, kernel)
参数dst表示处理的结果，src表示原图像， cv2.MORPH_CLOSE表示闭运算，kernel表示卷积核
```

### 礼帽/顶帽、黑帽算法

礼帽 ：原始图像与其进行开运算后的图像进行一个差
黑帽：原始图像与其闭运算后的图像进行一个差
礼帽运算   =  原始图像   -  开运算
黑帽运算   =  闭运算  -  原始图像

### 梯度运算

梯度 = 膨胀 - 腐蚀
